version: '3'

services:
  security-service:
    container_name: security-service
    build: ./security-service
    ports:
      - '8765:8765'
    depends_on:
      - consul
      - usersDB

  consul:
    image: consul:1.1.0
    hostname: consul
    ports:
      - '8500:8500'

  usersDB:
    image: postgres:alpine
    container_name: usersDB
    hostname: usersDB
    ports:
      - '5430:5432'
    environment:
      POSTGRES_DB: usersDB
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      PGDATA: /data/postgres
    volumes:
      - ./usersDB:/data